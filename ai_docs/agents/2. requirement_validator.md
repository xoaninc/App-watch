# Requirement Validation

Analyze and validate the requirement document to ensure it is complete and ready for implementation.

## Input

The user will provide a requirement document path or paste the content directly.

$ARGUMENTS

## Instructions

Read the requirement analysis guide first:
- `/ai_docs/development_process/requirement_analysis_guide.md`

### STEP 0: Detect Requirement Type (FIRST!)

**Detect type from file path:**

| Path Contains | Type | Validation Mode |
|---------------|------|-----------------|
| `/epics/` | **Epic** | FULL validation (all steps) |
| `/features/` | **Feature** | SIMPLIFIED (check epic reference) |
| `/hotfixes/` | **Hotfix** | PROBLEM-FOCUSED |
| `/cases/` | **Case** | INVESTIGATION ONLY (NO implementation) |

---

## FOR EPICS: Full Validation

Apply ALL steps below.

## FOR FEATURES: Simplified Validation

1. **Check parent epic reference exists** (MANDATORY)
2. Verify feature-specific requirements
3. Skip full business alignment (reference epic)
4. Skip full KPIs (reference epic)
5. Check feature-specific states/transitions
6. Check feature-specific collateral impact
7. Verify feature deadline

## FOR HOTFIXES: Problem-Focused Validation

Only check:
1. Problem clearly described
2. Impact documented (who affected, severity)
3. Root cause identified (or being investigated)
4. Proposed solution defined
5. Testing plan to verify fix
6. Rollback plan exists

Skip: Business alignment, KPIs, use cases, slicing

## FOR CASES: Investigation Validation (NO Implementation)

**Cases are for investigation only - do NOT generate design/tasks!**

Only check:
1. Incident clearly described
2. Timeline of events documented
3. Investigation findings present
4. Root cause analysis (or in progress)
5. Recommendations for next steps

Output: Investigation status report, NOT implementation plan.
If fix needed â†’ recommend creating Hotfix or Feature.

---

## EPIC Validation Steps (Full)

Then analyze the provided requirement following ALL steps:

### Step 1: Business Alignment (MANDATORY - FIRST CHECK)
- Which company objective does this align with? (Revenue / Churn / Sales)
- Is the contribution clearly explained?
- Are KPIs defined with measurable targets?
- If no KPIs: Is justification OBJECTIVE with real data?
- RED FLAG: Subjective justifications like "CS says it's requested"
- REQUIRED: Specific numbers (customers, revenue, tickets)
- REQUIRED: Evidence sources (customer names, ticket IDs)

**Experimentation Bypass:** If marked as experiment, accept instead of KPIs:
- Hypothesis defined?
- Test method defined? (A/B test, pilot, etc.)
- Success metrics defined?
- Investment limit defined? (max effort)
- Decision criteria defined? (what if success/failure)

### Step 2: Identify Entities
- What is the main entity/resource?
- Are there secondary entities?

### Step 3: CRUD Check
For each entity, verify:
- Create, Read, Update, Delete, List operations
- Flag missing operations

### Step 4: Status & State Analysis (MANDATORY)
For EVERY entity:
- Initial status when created
- All possible statuses
- Valid transitions between statuses
- Triggers, conditions, side effects
- Delete strategy (hard/soft/archive)
- Restore capability

### Step 5: Use Case Pattern Detection
Check for missing use cases using patterns:
- CRUD Pattern
- Lifecycle Pattern
- State Machine Pattern
- Bulk Operations Pattern
- Reporting Pattern

### Step 6: Inverse Operation Check
For every action, verify its opposite is considered.

### Step 7: User Journey Check
- Preconditions, postconditions
- Error recovery
- Undo/cancel flows

### Step 8: Collateral Impact Analysis (MANDATORY)
- Affected existing entities
- Shared data dependencies
- Business rules impact
- Workflow impact
- Integration impact
- Reports/dashboards impact
- Permission changes
- Breaking changes

### Step 9: Requirement Slicing Analysis
- Size assessment
- Slicing validation (if sliced)
- Out of scope analysis
- Information dependencies from out-of-scope items
- Red flags

### Step 10: Time Constraints & Deadlines (MANDATORY)
- Is there a deadline? Is it hard or soft?
- Why this deadline? (business event, season, contract)
- Consequences of missing deadline
- Business calendar conflicts (holidays, peak seasons)
- Is deadline realistic given scope?
- Buffer time for testing/training?
- Fallback plan if deadline is missed?

### Step 11: Testing Requirements
- What test types are needed?
- Critical test scenarios
- Test data requirements
- Regression scope
- UAT process

### Step 12: Definition of Done
- Are acceptance criteria testable?
- Quality gates defined?
- Sign-off process defined?
- Training needs?

## Output Format

Generate a validation report with:

```markdown
# Requirement Validation Report

**Document:** [name]
**Date:** [date]
**Status:** [Valid / Needs Revision / Incomplete]

## Summary
[Brief assessment of the requirement quality]

## Business Alignment Assessment
**Primary Objective:** [Revenue / Churn / Sales / Not specified]
**Contribution:** [Clear / Unclear / Missing]
**KPIs Defined:** [Yes / No / Experiment]
**Justification Type:** [Objective with data / Experiment / Subjective / Missing]

### Justification Quality
| Criteria | Status | Issue |
|----------|--------|-------|
| Specific numbers | Yes/No | |
| Evidence sources | Yes/No | |
| Revenue impact | Yes/No | |
| Customer names/tickets | Yes/No | |

### Experimentation Assessment (if applicable)
**Is this an experiment?** [Yes / No]

If Yes:
| Criteria | Defined | Details |
|----------|---------|---------|
| Hypothesis | Yes/No | [What we believe] |
| Test method | Yes/No | [How we validate] |
| Success metrics | Yes/No | [What tells us it works] |
| Investment limit | Yes/No | [Max effort] |
| Decision criteria | Yes/No | [Success/failure actions] |

**Experiment Valid:** [Yes / No - missing criteria]

**RED FLAGS:**
- [ ] Subjective justification detected (and not an experiment)
- [ ] Missing revenue/cost impact (and not an experiment)
- [ ] No evidence provided (and not an experiment)
- [ ] Experiment without success metrics
- [ ] Experiment without investment limit

## Entities Identified
| Entity | CRUD Coverage | States Defined | Delete Strategy |
|--------|---------------|----------------|-----------------|

## Missing Use Cases
| Use Case | Reason | Priority | Question for Stakeholder |
|----------|--------|----------|--------------------------|

## Missing State Information
| Entity | Missing Info | Question |
|--------|--------------|----------|

## Collateral Impact
| Component | Type | Impact | Action Required |
|-----------|------|--------|-----------------|

## Slicing Assessment
**Size:** [Small/Medium/Large]
**Slicing needed:** [Yes/No]
**Out of scope dependencies:**
| Item | Info Needed Now | Why |

## Time Constraints Assessment
**Deadline:** [Date or "Not specified"]
**Type:** [Hard / Soft / None]
**Reason:** [Business event, season, contract, etc.]
**Realistic:** [Yes / No / Needs discussion]
**Calendar conflicts:** [None / List conflicts]
**Buffer included:** [Yes / No]

### Deadline Risk Analysis
| Risk | If deadline missed | Mitigation |
|------|-------------------|------------|

## Testing Assessment
**Tests defined:** [Yes / Partially / No]
| Test Type | Required | Defined | Gap |
|-----------|----------|---------|-----|
| Unit | | | |
| Integration | | | |
| E2E | | | |
| UAT | | | |

**Critical scenarios identified:** [Yes / No]
**Test data requirements:** [Defined / Not defined]

## Definition of Done Assessment
**DoD defined:** [Yes / Partially / No]
| Criteria | Defined | Clear |
|----------|---------|-------|
| Acceptance criteria | | |
| Quality gates | | |
| Sign-off process | | |
| Training needs | | |

## Red Flags
- [ ] [Flag 1]
- [ ] [Flag 2]

## Open Questions for Stakeholder
1. [Question 1]
2. [Question 2]

## Checklist Summary
### Business Alignment: [X/Y passed]
### Content Completeness: [X/Y passed]
### Use Case Coverage: [X/Y passed]
### Entity States: [X/Y passed]
### Collateral Impact: [X/Y passed]
### Slicing: [X/Y passed]
### Time Constraints: [X/Y passed]
### Testing: [X/Y passed]
### Definition of Done: [X/Y passed]

## Recommendations
1. [Recommendation 1]
2. [Recommendation 2]
```

---

## Output Format for FEATURES

```markdown
# Feature Validation Report

**Document:** [name]
**Type:** Feature
**Parent Epic:** [Epic reference - MUST EXIST]
**Status:** [Valid / Needs Revision / Missing Epic Reference]

## Epic Reference Check
- [ ] Parent epic referenced
- [ ] Epic exists and is accessible
- [ ] Feature scope aligns with epic slice

## Feature-Specific Validation
[Simplified checks...]

## Recommendations
1. [Recommendation]
```

---

## Output Format for HOTFIXES

```markdown
# Hotfix Validation Report

**Document:** [name]
**Type:** Hotfix
**Severity:** [Critical / High / Medium]
**Status:** [Ready to Fix / Needs More Info]

## Problem Clarity
- [ ] Problem clearly described
- [ ] Impact quantified
- [ ] Root cause identified

## Solution Readiness
- [ ] Solution defined
- [ ] Testing plan exists
- [ ] Rollback plan exists

## Risk Assessment
| Risk | Probability | Impact | Mitigation |
|------|-------------|--------|------------|

## Ready to Proceed?
[Yes/No and why]
```

---

## Output Format for CASES

```markdown
# Case Investigation Report

**Document:** [name]
**Type:** Case (Investigation Only)
**Case ID:** [ID]
**Status:** [Under Investigation / Root Cause Found / Recommendations Ready]

## Investigation Completeness
- [ ] Incident clearly described
- [ ] Timeline documented
- [ ] Findings documented
- [ ] Root cause identified

## Recommendations
| Action | Type | Priority | Create |
|--------|------|----------|--------|
| [action] | Hotfix/Feature/Process | High/Medium/Low | Link to create |

## Next Steps
[What needs to happen next - NOT implementation details]

**NOTE:** This is an investigation report. Implementation requires creating a separate Hotfix or Feature.
```

---

## Important Notes

- This is NOT a strict template validation - verify CONTENT, not format
- Ask clarifying questions if the requirement is ambiguous
- Flag critical issues that would block implementation
- Provide actionable recommendations
- Pay special attention to deadlines in restaurant/hospitality sector (Christmas, Valentine's, etc.)
- **For Cases:** Do NOT generate design or tasks - only investigation report

---

## Philosophy: Analysis Informs, Never Blocks

**THE USER ALWAYS DECIDES.**

- This validation identifies risks and gaps - it does NOT block development
- If something is missing, flag it and ask: "Do you want to proceed anyway?"
- If the user says "proceed", we proceed - document concerns briefly, then execute
- Better definition upfront helps avoid historical patterns (incomplete features, patches on patches, unused features)
- But this is a **tool, not a gate** - never bureaucracy

**NEVER say:** "Cannot proceed until X is defined"
**ALWAYS say:** "X is missing/risky. Proceed anyway or define first?"